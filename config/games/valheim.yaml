id: valheim
name: Valheim Dedicated Server
steamAppId: 896660

# LGSM server name - enables use of generic LGSM playbooks
lgsmServerName: vhserver

ports:
  game:
    port: 2456
    protocol: udp
    description: "Game port"
  query:
    port: 2457
    protocol: udp
    description: "Query port"

resources:
  minMemoryMb: 4096
  recommendedMemoryMb: 8192
  minCpuCores: 4
  diskSpaceGb: 10

# Use generic LGSM playbooks
playbooks:
  provision: playbooks/lgsm-provision.yaml
  start: playbooks/lgsm-start.yaml
  stop: playbooks/lgsm-stop.yaml
  backup: playbooks/lgsm-backup.yaml
  installMods: playbooks/install-mods.yaml

configSchema:
  serverName:
    type: string
    required: true
    description: "Server name shown in browser"
  worldName:
    type: string
    required: true
    default: "Dedicated"
    description: "World/save name"
  password:
    type: string
    required: false
    minLength: 5
    description: "Server password (min 5 chars)"
  public:
    type: boolean
    required: false
    default: true
    description: "Show in server browser"
  crossplay:
    type: boolean
    required: false
    default: false
    description: "Enable crossplay (Xbox/PC). When enabled, uses PlayFab relay instead of direct connections."

connectionTemplate:
  title: "Valheim Server Connection"
  lines:
    - "**Server:** {config.serverName}"
    - "**Address:** {host}:{ports.game}"
    - "**Password:** ||{config.password}||"
    - "**World:** {config.worldName}"
    - ""
    - "To connect: Join via Steam server browser or add to favorites"
    - "Server Name: {config.serverName}"

# Mod support configuration
modsConfig:
  enabled: true
  source: thunderstore
  fileFormat: dll
  installPath: BepInEx/plugins
  repositoryUrl: https://thunderstore.io/c/valheim/
  framework:
    name: BepInEx
    source: thunderstore
    packageId: denikson-BepInExPack_Valheim
    required: true
  notes: |
    Valheim mods require BepInEx framework to be installed first.
    Mods are .dll files placed in BepInEx/plugins directory.
    Server and client must have matching mods installed.